<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building RESTful APIs with Django</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

</head>
<body>
<main class="grid-container">
    <div class="sidebar">
        <h2>API Guide Contents</h2>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="restful_api_guide.html" class="active">RESTful API Guide</a></li>
                <li><a href="views_guide.html">Creating Views</a></li>
                <li><a href="models_guide.html">Setting Up Models</a></li>
                <li><a href="serializers_guide.html">Understanding Serializers</a></li>
            </ul>
        </nav>
    </div>
    <div class="content">
        <h1>Building RESTful APIs with Django</h1>
        
        <h2>Initial Setup</h2>
        <p>Ensure Django is installed and create a new project if you haven't already. Then, install Django REST Framework:</p>
        <pre><code>pip install djangorestframework</code></pre>
        <p>Add 'rest_framework' to your INSTALLED_APPS in <code>settings.py</code>:</p>
        <pre><code>INSTALLED_APPS = [
    ...
    'rest_framework',
]</code></pre>

        <h2>Creating a Simple User Model</h2>
        <p>Define a User model in <code>models.py</code>:</p>
        <pre><code>from django.db import models

class User(models.Model):
    name = models.CharField(max_length=100)
    email = models.EmailField(unique=True)</code></pre>

        <h2>Creating Serializers</h2>
        <p>Serializers allow complex data such as Django model instances to be converted into Python datatypes that can be easily rendered into JSON. Create a UserSerializer in <code>serializers.py</code>:</p>
        <pre><code>from rest_framework import serializers
from .models import User

class UserSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = '__all__'</code></pre>

        <h2>Function-Based Views (FBV)</h2>
        <p>Start with a simple FBV to understand handling requests and responses in Django:</p>
        <pre><code>from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from .models import User
from .serializers import UserSerializer
from rest_framework.parsers import JSONParser

@csrf_exempt
def user_list(request):
    if request.method == 'GET':
        users = User.objects.all()
        serializer = UserSerializer(users, many=True)
        return JsonResponse(serializer.data, safe=False)
    elif request.method == 'POST':
        data = JSONParser().parse(request)
        serializer = UserSerializer(data=data)
        if serializer.is_valid():
            serializer.save()
            return JsonResponse(serializer.data, status=201)
        return JsonResponse(serializer.errors, status=400)</code></pre>

        <h2>Transitioning to Django REST Framework</h2>
        <p>DRF offers a more structured approach with class-based views for handling CRUD operations. Here's how to implement the same user list functionality with DRF:</p>
        <pre><code>from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from .models import User
from .serializers import UserSerializer

class UserList(APIView):
    def get(self, request, format=None):
        users = User.objects.all()
        serializer = UserSerializer(users, many=True)
        return Response(serializer.data)

    def post(self, request, format=None):
        serializer = UserSerializer(data=request.data)
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)</code></pre>

        <h2>Configuring URLs</h2>
        <p>To enable your API endpoints, you need to configure URLs in both your Django app and the project's main directory.</p>

        <h3>App URL Configuration</h3>
        <p>Create a <code>urls.py</code> in your app directory if it doesn't already exist, and define URLs for your views:</p>
        <pre><code>from django.urls import path
from .views import UserList

urlpatterns = [
    path('users/', UserList.as_view(), name='user-list'),
]</code></pre>
        <p>This file maps the <code>/users/</code> path to the <code>UserList</code> view.</p>

        <h3>Project URL Configuration</h3>
        <p>In your project's <code>urls.py</code> (located in the same directory as <code>settings.py</code>), include the app's URL configuration:</p>
        <pre><code>from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('your_app_name.urls')),
]</code></pre>
        <p>Replace <code>'your_app_name'</code> with the actual name of your app. This step makes the app's endpoints accessible under the <code>/api/</code> path, so the full path to the users list would be <code>/api/users/</code>.</p>

        <h2>Testing with Postman</h2>
        <p>Once you've completed these steps, you can use Postman to interact with your API:</p>
        <ul>
            <li>To list users or add a new user, send a GET or POST request to <code>/api/users/</code>.</li>
            <li>For retrieving, updating, or deleting a specific user, send a GET, PUT, or DELETE request to <code>/api/users/&lt;id&gt;/</code>, replacing <code>&lt;id&gt;</code> with the user's ID.</li>
        </ul>

        <p>This guide provides the steps to build and configure a RESTful API in Django, enabling you to manage a fake users dataset and interact with it using tools like Postman.</p>
    </div>
</main>
<script src="injectCopyButtons.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>